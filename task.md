# 自作キーボードカタログサイト 開発タスク一覧

## 1. プロジェクト初期設定・環境構築

- [x] Next.js (v15) プロジェクト作成
- [x] Biome (リンター/フォーマッター) 導入と設定
- [x] shadcn/ui 導入と設定
- [x] テストフレームワーク導入
  - [x] Vitest 導入と設定
  - [x] Playwright 導入と設定
- [x] Supabase プロジェクト作成
  - [x] プロジェクト設定 (リージョン選択、環境変数設定)
  - [x] API キーの取得と環境変数への設定
- [x] Supabase JavaScript Client 導入
- [ ] Supabase Auth 設定
  - [x] Github 認証設定
  - [ ] Google ログイン設定（将来実装）
- [x] Supabase Storage 設定 (画像アップロード用)
- [ ] Vercel プロジェクト設定と初期デプロイ確認

## 2. データベース設計とマイグレーション

- [ ] Supabase テーブル設計
  - [x] ユーザーテーブル (auth.users 拡張)
  - [x] プロダクトテーブル (キーボード、キーキャップ、小物共通)
  - [x] カテゴリテーブル
  - [x] タグテーブル
  - [x] プロダクト-タグ中間テーブル
  - [x] お気に入りテーブル
  - [x] (ランキング用集計テーブル - 必要に応じて)
- [x] Row Level Security (RLS) ポリシー設定
  - [x] プロダクトテーブルの RLS ポリシー
  - [x] お気に入りテーブルの RLS ポリシー
  - [x] その他テーブルの RLS ポリシー
- [x] データベースインデックス設定
- [x] 初期データ投入 (カテゴリなど)

## 3. 認証機能の実装

- [x] Supabase Auth を用いたログイン機能の実装
  - [x] Github ログイン実装
  - [ ] Google ログイン実装（将来実装）
  - [x] ログインフォーム UI 作成
- [ ] ログイン状態の管理
  - [ ] Supabase Auth ヘルパー関数の実装
  - [ ] ユーザーコンテキスト作成 (Context API)
  - [ ] ユーザー状態管理 (Zustand など)
- [x] 認証状態に基づくページアクセス制御
  - [x] 認証ミドルウェア実装
  - [x] ルートガード実装
- [ ] ユーザープロフィール情報の取得と表示 (マイページ)
  - [ ] プロフィール情報取得 API 実装
  - [ ] プロフィール表示 UI 実装

## 4. コア機能実装: プロダクト関連

- [ ] プロダクト登録機能
  - [ ] 登録フォーム UI 作成 (shadcn/ui)
  - [ ] フォームバリデーション実装
  - [ ] 画像アップロード機能 (Supabase Storage)
    - [ ] 画像プレビュー機能
    - [ ] 複数画像アップロード処理
  - [ ] Supabase へのデータ保存処理
  - [ ] タグ選択・作成機能
- [ ] プロダクト編集機能
  - [ ] 編集フォーム UI 作成
  - [ ] 既存データ取得と表示
  - [ ] 画像の追加・削除機能
  - [ ] Supabase データ更新処理
- [ ] プロダクト削除機能
  - [ ] 確認ダイアログ
  - [ ] 関連データの削除処理
  - [ ] Supabase データ削除処理
- [ ] プロダクト一覧表示機能
  - [ ] 各カテゴリ別一覧ページ (キーボード、キーキャップ、小物、工具)
  - [ ] Supabase クエリ最適化
  - [ ] ページネーション実装
  - [ ] 無限スクロール実装 (オプション)
  - [ ] ソート機能 (新着順、人気順、お気に入り数など)
  - [ ] 絞り込み検索 UI (タグ、価格帯など)
  - [ ] プロダクトカード UI コンポーネント
- [ ] プロダクト詳細表示機能
  - [ ] 詳細情報表示 UI
  - [ ] 画像ギャラリー表示
    - [ ] 画像スライダー実装
    - [ ] 画像拡大表示機能
  - [ ] 関連リンク表示 (GitHub, 販売ページ)
  - [ ] 登録者情報表示

## 5. コア機能実装: 検索機能

- [ ] タグ検索機能
  - [ ] タグクラウドまたはタグ一覧表示
  - [ ] タグ選択 UI 実装
  - [ ] タグによるプロダクト絞り込みクエリ実装
  - [ ] 複数タグ選択機能
- [ ] フリーワード検索機能
  - [ ] 検索窓 UI
  - [ ] 検索クエリ構築
  - [ ] 検索結果表示
  - [ ] オートコンプリート機能 (オプション)

## 6. コア機能実装: お気に入り機能

- [ ] プロダクトへのお気に入り登録/解除ボタン UI (プロダクト詳細、一覧)
  - [ ] お気に入りボタンコンポーネント作成
  - [ ] お気に入り状態表示
- [ ] お気に入り状態の Supabase 保存・更新処理
  - [ ] RLS ポリシーに基づく保存処理
  - [ ] 楽観的 UI 更新
- [ ] マイページでのお気に入り一覧表示
  - [ ] お気に入り一覧取得クエリ
  - [ ] お気に入り一覧表示 UI

## 7. コア機能実装: ランキング機能

- [ ] ランキング集計ロジック
  - [ ] お気に入り数集計クエリ
  - [ ] 閲覧数計測・集計機能
  - [ ] 期間別ランキング集計処理
- [ ] ランキング表示 UI (トップページ、各一覧ページ)
  - [ ] ランキングカードデザイン
  - [ ] ランキング切り替え UI
- [ ] (管理機能) ランキング集計期間設定 (デイリー、ウィークリー、マンスリー)
  - [ ] 管理画面での設定 UI
  - [ ] 設定値の保存と取得

## 8. UI/UX 実装 (shadcn/ui を活用)

- [ ] トップページ UI 作成
  - [ ] ヒーローセクション
  - [ ] サイト概要セクション
  - [ ] 新着情報セクション
  - [ ] おすすめプロダクトセクション
  - [ ] ランキングセクション
- [ ] 各一覧ページ UI 作成 (キーボード、キーキャップ、小物、工具)
  - [ ] フィルターサイドバー
  - [ ] グリッドレイアウト
  - [ ] リストレイアウト切り替え (オプション)
- [ ] プロダクト詳細ページ UI 作成
  - [ ] 詳細レイアウト
  - [ ] 関連プロダクト表示
- [ ] ユーザーページ (マイページ) UI 作成
  - [ ] プロフィールセクション
  - [ ] 登録プロダクトセクション
  - [ ] お気に入りセクション
- [ ] プロダクト登録・編集ページ UI 作成
  - [ ] マルチステップフォーム
  - [ ] プレビュー機能
- [ ] ヘッダー、フッター、ナビゲーション UI 作成
  - [ ] レスポンシブナビゲーション
  - [ ] ユーザーメニュー
  - [ ] 検索バー
- [ ] レスポンシブデザイン対応 (スマートフォン、タブレット)
  - [ ] モバイルファーストアプローチ
  - [ ] ブレイクポイント設定
  - [ ] タッチ操作最適化
- [ ] 全体的なデザイントーンの統一 (シンプルかつモダン)
  - [ ] カラーパレット定義
  - [ ] タイポグラフィ設定
  - [ ] アニメーション・トランジション設定

## 9. 管理機能実装 (サイト運営者向け)

- [ ] 管理者認証・権限設定
  - [ ] 管理者ロール設定 (Supabase RLS)
  - [ ] 管理画面アクセス制御
- [ ] ユーザー管理 (アカウント停止など)
  - [ ] ユーザー一覧表示
  - [ ] ユーザー詳細表示
  - [ ] アカウント停止・復帰機能
- [ ] プロダクト管理 (不適切なプロダクトの削除、編集)
  - [ ] プロダクト一覧表示 (管理者用)
  - [ ] プロダクト承認・非承認機能
  - [ ] プロダクト編集・削除機能
- [ ] タグ管理 (追加、編集、削除)
  - [ ] タグ一覧表示
  - [ ] タグ追加・編集・削除機能
  - [ ] タグ統合機能
- [ ] お知らせ機能 (作成、表示)
  - [ ] お知らせ作成フォーム
  - [ ] お知らせ一覧・詳細表示
  - [ ] お知らせ公開・非公開設定
- [ ] アフィリエイトリンク管理 (工具ページ用)
  - [ ] アフィリエイトリンク登録・編集
  - [ ] リンク効果測定機能

## 10. 収益化機能実装

- [ ] 工具・便利工具一覧ページへのアフィリエイトリンク掲載機能
  - [ ] アフィリエイトリンク表示コンポーネント
  - [ ] クリック計測機能
  - [ ] 商品情報取得・表示機能

## 11. 非機能要件対応

- [ ] 多言語対応準備
  - [ ] i18n ライブラリ導入 (next-international, next-i18next など)
  - [ ] 言語ファイル構造設計
  - [ ] テキストリソースの外部ファイル化 (日本語)
  - [ ] 言語切り替え UI (将来用)
- [ ] SEO 対策
  - [ ] 適切な HTML タグの使用 (title, meta description, h1 など)
  - [ ] 構造化データマークアップ (JSON-LD) の導入
  - [ ] `sitemap.xml` 生成機能
  - [ ] `robots.txt` 設定
  - [ ] Next.js のレンダリング戦略最適化 (SSR/SSG)
  - [ ] OGP 設定
- [ ] パフォーマンス最適化
  - [ ] 画像最適化 (next/image)
  - [ ] コード分割 (動的インポート)
  - [ ] キャッシュ戦略
  - [ ] Lighthouse などでのパフォーマンス計測と改善
- [ ] セキュリティ対策
  - [ ] XSS, CSRF 対策の確認
  - [ ] 入力値バリデーションの徹底
  - [ ] Supabase RLS ポリシーの検証
  - [ ] CSP (Content Security Policy) 設定
- [ ] プライバシーポリシー、利用規約ページの作成と表示
  - [ ] プライバシーポリシー作成
  - [ ] 利用規約作成
  - [ ] クッキーポリシー作成

## 12. テスト

- [ ] 単体テスト
  - [ ] コンポーネントテスト
  - [ ] ユーティリティ関数テスト
  - [ ] API ルートテスト
- [ ] 統合テスト
  - [ ] ページコンポーネントテスト
  - [ ] API 連携テスト
  - [ ] フォーム送信テスト
- [ ] E2E テスト
  - [ ] 主要ユーザーフロー (登録、ログイン、プロダクト投稿など) のテスト
  - [ ] クロスブラウザテスト
- [ ] アクセシビリティテスト
  - [ ] WAI-ARIA ガイドライン準拠チェック
  - [ ] キーボードナビゲーションテスト
  - [ ] スクリーンリーダー互換性テスト
- [ ] パフォーマンステスト
  - [ ] ページ読み込み速度テスト
  - [ ] レスポンス時間テスト
  - [ ] 負荷テスト (必要に応じて)
- [ ] セキュリティテスト
  - [ ] 脆弱性スキャン
  - [ ] 認証・認可テスト
  - [ ] RLS ポリシーテスト
- [ ] Biome による静的解析の常時実行

## 13. デプロイと運用準備

- [ ] Vercel へのデプロイパイプライン構築
  - [ ] CI/CD 設定
  - [ ] プレビューデプロイ設定
  - [ ] 本番環境デプロイ設定
- [ ] 環境変数設定 (ローカル開発用、本番用)
  - [ ] 開発環境変数設定
  - [ ] 本番環境変数設定
  - [ ] シークレット管理
- [ ] カスタムドメイン設定 (Vercel)
  - [ ] DNS 設定
  - [ ] SSL 証明書設定
- [ ] 本番環境での動作確認
  - [ ] クロスブラウザテスト
  - [ ] モバイル動作確認
  - [ ] パフォーマンス確認
- [ ] エラーモニタリング設定 (Sentry など)
  - [ ] エラーログ収集
  - [ ] アラート設定
- [ ] 簡単な運用マニュアル作成 (プロダクト登録方法など)
  - [ ] 管理者向けマニュアル
  - [ ] 一般ユーザー向けマニュアル

## 14. その他

- [ ] 定期的な進捗確認と課題共有
- [ ] 要件定義書との整合性確認
- [ ] ユーザーフィードバック収集の仕組み検討
- [ ] 将来的な機能拡張の検討と優先順位付け
