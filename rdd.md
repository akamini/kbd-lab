## 自作キーボードカタログサイト 要件定義書

### 1. プロジェクト概要

自作キーボード愛好家向けのカタログサイトを構築する。ユーザーはキーボード、キーキャップ、その他関連小物を閲覧・検索でき、投稿者は自身のプロダクトを登録できる。サイト運営者はアフィリエイトリンクを通じて収益化を図る。

### 2. 目的

- 自作キーボードに関する情報を集約し、ユーザーが目的の製品や情報を見つけやすくする。
- コミュニティの活性化に貢献する。
- サイト運営者による収益化を実現する。

### 3. ターゲットユーザー

- 自作キーボードに興味がある人
- 自作キーボードをこれから始めたい人
- 自作キーボードのパーツや工具を探している人
- 自身の作成したキーボードや関連プロダクトを公開したい人

### 4. 機能要件 4.1. ページ構成

- トップページ:
  - サイトの概要、新着情報、おすすめプロダクト、ランキングなどを表示。
- キーボード一覧ページ:
  - 登録されたキーボードを一覧表示。
  - 絞り込み検索機能（タグ、価格帯など）。
  - ソート機能（新着順、人気順、お気に入り数など）。
- キーキャップ一覧ページ:
  - 登録されたキーキャップを一覧表示。
  - 絞り込み検索機能（タグ、素材、プロファイルなど）。
  - ソート機能（新着順、人気順、お気に入り数など）。
- その他小物一覧ページ:
  - ケーブル、ケース、デスクマットなどの小物を一覧表示。
  - 絞り込み検索機能（タグ、カテゴリなど）。
  - ソート機能（新着順、人気順、お気に入り数など）。
- 工具・便利工具一覧ページ:
  - 自作キーボード製作に必要な工具や便利なツールを一覧表示。
  - アフィリエイトリンクを掲載。
  - 絞り込み検索機能（タグ、用途など）。
- プロダクト詳細ページ:
  - 各プロダクト（キーボード、キーキャップ、小物）の詳細情報を表示。
    - プロダクト名
    - 説明文
    - 画像（複数枚登録可能）
    - GitHub リンク
    - 販売ページリンク
    - 登録者情報
    - タグ
    - お気に入り登録ボタン
- ユーザーページ（マイページ）:
  - 登録したプロダクトの一覧・編集・削除。
  - お気に入り登録したプロダクトの一覧。
  - プロフィール編集。
- プロダクト登録・編集ページ:
  - 新規プロダクトの登録フォーム。
  - 既存プロダクトの編集フォーム。 4.2. ユーザー認証
- 認証ライブラリ: BetterAuth を利用。
- ログイン方法: Google アカウントによるログインのみを許可。
- 権限管理:
  - 一般ユーザー: プロダクトの閲覧、検索、お気に入り登録。
  - 投稿ユーザー (Google ログインユーザー): プロダクトの登録、編集、削除。
  - 管理者: サイト全体の管理、不適切コンテンツの削除など（別途定義）。 4.3. プロダクト登録・管理
- 投稿者は以下の情報を登録可能:
  - プロダクト名
  - カテゴリ（キーボード、キーキャップ、小物）
  - 説明文
  - 画像（複数枚アップロード可能）
  - GitHub リポジトリへのリンク
  - 販売ページの URL
  - 任意のタグ（複数設定可能）
- 投稿者は自身が登録したプロダクトを編集・削除可能。 4.4. 検索機能
- ユーザーはプロダクトをタグで検索できる。
- フリーワード検索（プロダクト名、説明文など）。 4.5. 収益化機能
- サイト運営者は、主に「工具・便利工具一覧ページ」に Amazon アソシエイトや楽天アフィリエイトなどのアフィリエイトリンクを掲載できる。 4.6. 管理機能（サイト運営者向け）
- ユーザー管理（アカウント停止など）。
- プロダクト管理（不適切なプロダクトの削除、編集）。
- タグ管理。
- お知らせ機能。
- アフィリエイトリンク管理。
- ランキング集計方法の設定。 4.7. お気に入り機能
- ログインユーザーは、気になるプロダクトをお気に入りとして登録できる。
- お気に入り登録/解除はプロダクト詳細ページや一覧ページから行える。
- ユーザーページ（マイページ）でお気に入り一覧を確認できる。 4.8. ランキング機能
- プロダクトをお気に入り登録数や閲覧数などに基づいてランキング表示する。
- トップページや各一覧ページにランキングセクションを設ける。
- ランキングの集計期間（デイリー、ウィークリー、マンスリーなど）を設定可能とする（管理機能）。

### 5. 非機能要件 5.1. 技術スタック

- フロントエンド: Next.js (v15)
- UI ライブラリ: shadcn/ui
- データベース: Cloudflare D1
- ORM: Drizzle ORM
- 認証: BetterAuth
- デプロイ: Cloudflare Pages (Workers)
  - Next.js の Cloudflare へのデプロイには @opennextjs/cloudflare を使用。
- リンター/フォーマッター: Biome 5.2. デザイン
- シンプルかつモダンなデザイン。
- ユーザーインターフェースは直感的で使いやすいこと。
- レスポンシブデザインに対応し、スマートフォンやタブレットでも快適に閲覧できること。 5.3. パフォーマンス
- ページの表示速度が速いこと。
- 大量のプロダクトデータが登録された場合でも、検索や表示、ランキング集計が遅延しないこと。 5.4. セキュリティ
- Cloudflare のセキュリティ機能、BetterAuth のセキュリティ機能を活用し、安全なシステムを構築する。
- XSS、CSRF などの一般的なウェブ脆弱性対策を施す。
- 個人情報の取り扱いには細心の注意を払う（プライバシーポリシーの策定・表示）。 5.5. メンテナンス性・拡張性
- コードはリーダブルでメンテナンスしやすいように記述する。Biome によるコード規約を遵守する。
- 将来的な機能追加や変更に対応しやすい設計とする。 5.6. 多言語対応
- 初期リリースでは日本語を主要言語とする。
- 将来的には英語など他の言語に対応できるよう、i18n (国際化) の仕組みを導入しやすい設計を考慮する。
  - テキストリソースを外部ファイルで管理する。
  - URL による言語切り替えなどを想定。 5.7. SEO 対策
- 検索エンジンがサイトのコンテンツを適切にクロール・インデックスできるように基本的な SEO 対策を施す。
  - 適切な HTML タグの使用（title, meta description, h1 など）。
  - 構造化データマークアップ（JSON-LD など）の導入検討。
  - Sitemap.xml の生成と送信。
  - robots.txt の適切な設定。
  - Next.js の SSR/SSG 機能を活用したパフォーマンス向上。
  - 分かりやすい URL 構造。

### 6. 成果物（想定）

- ウェブサイト一式（ソースコード、設定ファイルなど）
- データベーススキーマ定義 (Drizzle ORM 形式)
- （必要に応じて）簡単な運用マニュアル

### 7. 今後の検討事項 (スコープ外だが将来的に考慮)

- コメント機能の追加（プロダクトに対するユーザーコメント）
- プロダクト掲載枠の有料化
- より高度なパーソナライズ機能
